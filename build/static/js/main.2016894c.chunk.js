(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),s=n.n(r),u=n(11),c=n(12),i=n(14),l=n(13),m=n(15),h=function(e){var t=e.person,n=e.removePerson;return o.a.createElement("div",null,o.a.createElement("li",null,t.name," ",t.number,o.a.createElement("button",{name:t.name,id:t.id,onClick:n},"Poista")))},f=function(e){var t=e.persons,n=e.searchName,a=e.removePerson;return t.filter(function(e){return-1!==e.name.toUpperCase().indexOf(n.toUpperCase())}).map(function(e){return o.a.createElement(h,{key:e.name,person:e,removePerson:a})})},p=n(2),d=n.n(p),g="https://puhelinluettelo-petro.herokuapp.com/api/persons",v={getAll:function(){return d.a.get(g).then(function(e){return e.data})},create:function(e){return d.a.post("".concat(g),e).then(function(e){return e.data})},update:function(e,t){return d.a.put("".concat(g,"/").concat(e),t).then(function(e){return e.data})},remove:function(e){return d.a.delete("".concat(g,"/").concat(e)).then(function(e){return e.data})}},N=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"message"},t)},w=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleNameChange=function(e){console.log(e.target.value),n.setState({newName:e.target.value})},n.handleNumberChange=function(e){console.log(e.target.value),n.setState({newNumber:e.target.value})},n.handleSearchChange=function(e){console.log(e.target.value),n.setState({searchName:e.target.value})},n.addPerson=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber},a=-1;n.state.persons.forEach(function(e){return e.name===t.name?a=e.id:0}),n.state.persons.find(function(e){return e.name===n.state.newName})?window.confirm("".concat(n.state.newName," on jo luettelossa, korvataanko vanha numero uudella?"))&&v.update(a,t).then(function(e){n.setState({persons:n.state.persons.concat(e),message:"Muutettiin ".concat(e.name," tietoja")}),setTimeout(function(){n.setState({message:null})},2e3)}).catch(function(e){n.setState({message:"".concat(n.state.newName," on jo poistettu palvelimelta")}),setTimeout(function(){n.setState({message:null})},2e3)}):(v.create(t).then(function(e){n.setState({persons:n.state.persons.concat(e),message:"Lis\xe4ttiin ".concat(e.name)}),setTimeout(function(){n.setState({message:null})},2e3)}),n.setState({newName:"",newNumber:""}))},n.removePerson=function(e){var t=e.target.getAttribute("id"),a=e.target.getAttribute("name");window.confirm("Poistetaanko ".concat(a,"?"))&&(v.remove(t),n.setState({persons:n.state.persons.filter(function(e){return e.id!==t}),message:"Poistettiin ".concat(a)}),setTimeout(function(){n.setState({message:null})},2e3))},n.state={persons:[],newName:"",newNumber:"",searchName:"",message:null},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,"Puhelinluettelo"),o.a.createElement(N,{message:this.state.message}),"Rajaa n\xe4ytett\xe4vi\xe4: ",o.a.createElement("input",{value:this.state.searchName,onChange:this.handleSearchChange}),o.a.createElement("h4",null," Lis\xe4\xe4 uusi "),o.a.createElement("form",{onSubmit:this.addPerson},o.a.createElement("div",null,"nimi: ",o.a.createElement("input",{value:this.state.newName,onChange:this.handleNameChange})),o.a.createElement("div",null,"numero : ",o.a.createElement("input",{value:this.state.newNumber,onChange:this.handleNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),o.a.createElement("h2",null,"Numerot"),o.a.createElement(f,{persons:this.state.persons,searchName:this.state.searchName,removePerson:this.removePerson}))}},{key:"componentDidMount",value:function(){var e=this;console.log("did mount"),v.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t})})}}]),t}(o.a.Component);n(41);s.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.2016894c.chunk.js.map